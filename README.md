# Описание проекта
Это телеграм бот для поиска фильмов по сайту www.kinopoisk.ru.

Есть 2 основные команды:
- find_film - поиск по названию.
- deep_find - поиск по жанру, году, рейтингу.

А так же:
- start - стартовое сообщение.
- help - покажет какие есть команды.
- history - показать всю историю запросов в формате (команда, параметры поиска, дата).

### find_film
- При вводе этой команды бот отправляет сообщении пользователю с предложением ввести название,
после чего просит выбрать количество результатов поиска(в виде inline клавиатуры, максимум 8)
- Отправляет запрос через API, полученную информацию по фильмам добавляет в БД.
- Отправляет в чат сообщение с постером фильма(если его нет, то картинку "no_poster.jpg"), его названием годом и т. д.
- Имеется пагинация + кнопка "описание" - показывает описание фильма ели оно есть.
- Далее редактирует сообщение и сообщает информацию пользователю о кол-ве найденных фильмов(максимум 8),
с inline кнопкой "Показать результаты"

### deep_find
- При вводе этой команды бот отправляет сообщение с просьбой выбрать один из жанров.
- Далее редактирует сообщение и просит уже выбрать период.
- Снова редактирует и предлагает выбрать рейтинг по кинопоиску.
- После чего отправляет запрос, полученную информацию по фильмам добавляет в БД.
- Далее редактирует сообщение и сообщает информацию пользователю о кол-ве найденных фильмов(максимум 250),
с inline кнопкой "Показать результаты"

Для обоих этих команд есть таблица в БД "HistoryUserMessage", 
она нужна для того чтобы пользователь мог вернуться к любому сообщению с результатом запроса и пользоваться им.

После запроса туда вносится:
- id пользователя
- id сообщение
- список с id найденных фильмов, которые бот покажет пользователю

## Технологии
- requests
- telebot
- peewee
- python-dotenv

## Запуск
- установить зависимости командой pip install -r requirements.txt
- создать файл .env, заполнить его по аналогии с .env.template
- запустить файл main.py командой python main.py





